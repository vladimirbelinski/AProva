<!-- Arquivo: view.html
     Descrição: HTML da página de visualizações.
-->

<!-- Template /view -->
<template name="view">
	<main role="main" id="main">
		<div class="container">
			<div class="row">
				<div class="container col s12">
					{{#if currentUser}}
					<h5 class="top right" style='margin-top:2.5em'>Bem vindo(a){{usuario}}!</h5>
					{{/if}}
				</div>
			</div>
			
			<div class="row">
				<div class="container col s12">
					{{#if currentUser}}
					<h5>Você está visualizando o material: {{#each content}}{{title}}{{/each}}</h5>
					{{else}}
					<h5 style='margin-top:2em'>Você está visualizando o material: {{#each content}}{{title}}{{/each}}</h5>
					{{/if}}
					<a href="/content">Voltar para página de buscas</a>
				</div>
			</div>
			
			{{#each content}}
			<div class="row">
				<div class="container col s12">
					<div class="card white">
            <div class="card-content amber-text">
              <span class="card-title" id="{{_id}}">
							<!-- TODO: descobrir como apresentar o conteúdo (texto, imagens, vídeo...) -->
							<script> $("#{{_id}}").append("{{material}}"); </script>
							<!--{{material}}-->
							</span>
            </div>
            <div class="card-action">
							<h5>{{title}}</h5>
             	<p class="small"><strong>Autor: </strong>{{getName createdBy}}</p>
							<div class="chip">{{inst}}</div>
							<div class="chip">{{course}}</div>
							<div class="chip">{{subject}}</div>
							<div class="chip">{{topic}}</div>
							<div class="chip">{{professor}}</div>
							<div class="chip">{{year}}.{{semester}}</div>
            </div>
          </div>
				</div>
			</div>
			{{/each}}
			
			{{#if currentUser}}
			<div class="row" id="addAnswer">
			  <div class="container col s12">
					<script>
						$('textarea#answer').froalaEditor({placeholderText: 'Insira aqui sua resposta ou comentário'})
						$('textarea#answer').froalaEditor();
					</script>
			    <h5>Adicionar resposta ou comentário:</h5>
					<form role="form" id="form_newAnswer" name="form_newAnswer" class="col s12">
						<div class="row">
							<div class="container col s12">
								<textarea id="answer"></textarea>
							</div>
						</div>
						<div class="row">
							<div class="required_error_froala" id="answer_error"></div>
						</div>
					</form>
			  </div>
			  <div class="container col s12 right">
					<button role="button" class="btn-large waves-effect waves-light amber" type="submit" form="form_newAnswer" id="submitAnswer" href="#!">Enviar
			      <i class="material-icons right">send</i>
			    </button>
			  </div>
			</div>
			{{/if}}
			
			<div class="row">
			<div class="container col s12">
			 <h5>Comentários ou respostas para este material:</h5>
			</div>
		 </div>
			
			<div class="row">
				{{#each answers}}
				<div class="container col s12">
					<div class="card">
						<div class="card-content">
							<!-- TODO: descobrir como apresentar o conteúdo (texto, imagens, vídeo...)-->
							<script> $(".card-content").append("{{answer}}"); </script>
							{{answer}}
						</div>
						<div class="card-action">
							<p class="small"><strong>Autor: </strong>{{getName createdBy}}</p>
							<p class="small"><strong>Adicionado em: </strong>{{created}}</p>
						</div>
					 </div>
				</div>
			 {{/each}}
			</div>
		</div>
    </main>
</template>
